# Экраны и UI

## / (Главная)
- Показывает активные цели на текущую дату: `is_active = true`, `is_archived = false`, `start_date <= today <= end_date`.
- Сортировка: по статусу периода (success → in_progress → fail → archived), затем по времени создания.
- Фильтры: контекст (single), статус (single), теги (multi), сброс.
- Карточка цели:
  - Counter: ввод значения и отправка (Enter/кнопка, пустое поле = +1).
  - Time: старт/стоп таймера по цели (один активный timer на пользователя).
  - Check: переключение done/undone.
  - Отображение прогресса: текущий actual/target.
- Индикатор статуса и состояния запроса (pending/error) по goal periods.

## Глобальный таймер (нижняя панель)
- Кнопка Play открывает шторку запуска.
- Требует контекст (создается на лету), теги — опционально.
- Создает time entry без goal_id.
- Кнопка Stop завершает активный таймер.

## /goals/new (Создание цели)
- Поля: title, goal type (time/counter/check), period, direction (gte/lte), target, start/end dates.
- Контекст обязателен, выбирается из списка или создается на лету.
- Теги опциональны, создаются на лету.
- После сохранения пересчитываются goal periods.

## /goals/[id] (Детали цели)
- Сводка цели, период и прогресс за текущий период.
- Редактирование title, end date и тегов.
- Формы ручного ввода событий в зависимости от типа цели.
- Список последних 50 событий с возможностью удалить.
- Архивация скрывает цель из активных экранов; архивная цель отображает отдельное сообщение.

## /stats (Статистика)
- Период: week, month или custom диапазон дат.
- Фильтры: контексты (multi), теги (multi).
- Графики:
  - goal status counts по period_start (line).
  - tracked time по дням (line).
  - time by context (stacked bars, отключение контекста кликом).
  - context share (pie).

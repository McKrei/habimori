# Habimori

Минимальное приложение для целей и учета времени на базе Next.js и Supabase.

## Стек

- Next.js (App Router) + TypeScript
- Supabase (Auth + Postgres)
- Tailwind CSS
- Google OAuth
- Многоязычность (i18n): русский + английский

## Документация

- Обзор продукта: `docs/overview.md`
- Экраны/UI: `docs/screens.md`
- Доменные правила: `docs/domain-rules.md`
- Модель данных: `docs/data-model.md`
- Разработка и проверки: `docs/dev.md`
- Текущее состояние/статус: `docs/plan.md`

## Требования

- Node.js 20+
- npm

## Переменные окружения

Создайте `.env.local`:

- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY` (опционально)

## Запуск

```bash
npm install
npm run dev
```

или

```bash
make dev
```

Адрес: `http://localhost:3000`

## Проверки

```bash
npm run lint
npm run typecheck
npm run build
npm test
```

## Docker

```bash
make app
```

## i18n (многоязычность)

Приложение поддерживает русский и английский языки.

### Файлы переводов
- Переводы: `src/i18n/locales/{ru,en}.json`
- Ключи: `src/i18n/original-texts.md`

### Добавление перевода
1. Добавить ключ в `src/i18n/locales/ru.json`
2. Добавить перевод в `src/i18n/locales/en.json`
3. Использовать в компоненте: `const { t } = useTranslation(); t("key")`

### Переменные в переводах
```json
"filters.selected": "Выбрано: {{count}}"
```

### Компоненты
- `LanguageSwitcher` — переключатель языка (кнопка EN/RU в шапке)
- Переводы читаются из контекста, параметр `lng` в компонентах не используется напрямую

### ESLint
Переменные с префиксом `_` (например, `lng: _lng`) игнорируются правилом `@typescript-eslint/no-unused-vars`.



┌──────────────────────────────────────────────────────────────────────────────┐
│  [ Контексты:  ⌄  (multiselect) ]   [ Теги:  ⌄  (multiselect) ]              │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│  Пн, 29 дек                                                   Total 01:58:12 │
└──────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────────────────────────────────────┐
│  [5] Context: VK  Tegs: #работа #план #..                     Total: 05:21:0│
│      [ 09:21 ] - [ 18:26 ]   [📅]   Dur: 05:21:01                   [▶]   [⋮]│
└──────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────────────────────────────────────┐
│  [3] Context: Созвоны  Tegs: #vk #дейлик                      Total: 01:03:10│
│      [ 09:47 ] - [ 12:13 ]   [📅]   Dur: 01:03:10                   [▶]  [⋮] │
│      ────────────────────────────────────────────────────────────────────    │
│      [ 09:47 ] - [ 10:20 ]   [📅]   Dur 00:33:00                         [⋮] │
│      [ 10:25 ] - [ 11:10 ]   [📅]   Dur 00:45:00                         [⋮] │
│      [ 11:20 ] - [ 12:13 ]   [📅]   Dur 00:53:10                         [⋮] │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│  Вт, 30 дек                                                   Total 02:33:55 │
└──────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────────────────────────────────────┐
│     Context: Созвоны  Tegs: #vk #дейлик                       Total: 02:33:55│
│      [ 14:00 ] - [ 15:26 ]   [📅]   Dur: 02:33:55                   [▶]   [⋮]│
└──────────────────────────────────────────────────────────────────────────────┘
